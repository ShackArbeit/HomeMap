<!DOCTYPE html>
<html>
  <head>
    <title>Mark Map</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <link rel="stylesheet" type="text/css" href="./style.css" />
  </head>
  <body>
    <div id="map" style="height:70vh;width:100vw;"></div>
    <div class="d-flex justify-content-around">
    <div class="d-flex flex-column mx-4 mt-3">
          <label for="zoom" class="mb-2 fs-2 text-danger">跳動 Marker</label>
        <input type="text" id="jumplat" placeholder="請輸入緯度" 
        class="mb-4 mt-3"
        style="max-width: 300px;border:2px solid #008aff">
        <input type="text" id="jumplon" placeholder="請輸入經度"
        class="mb-4 "
        style="max-width: 300px;border:2px solid #008aff"
        >
        <input type="text" id="jumpValue" placeholder="請輸入 Marker 的標題"
        class="mb-4 "
        style="max-width: 300px;border:2px solid #008aff"
        >
        <input type="text" id="outIcon" placeholder="引入外部 Icon URL "
        class="mb-4 "
        style="max-width: 300px;border:2px solid #008aff"
        >
        <button onclick="JumpMarker()"
        class="btn btn-primary"
        style="max-width: 200px;"
        >建立跳動 Marker</button>
    </div>
    <div class="d-flex flex-column mx-4 mt-3">
            <label for="zoom" class="mb-2 fs-2 text-danger">靜態 Marker</label>
          <input type="text" id="jumplat2" placeholder="請輸入緯度" 
          class="mb-4 mt-3"
          style="max-width: 300px;border:2px solid #008aff">
          <input type="text" id="jumplon2" placeholder="請輸入經度"
          class="mb-4 "
          style="max-width: 300px;border:2px solid #008aff"
          >
          <input type="text" id="jumpValue2" placeholder="請輸入 Marker 的標題"
          class="mb-4 "
          style="max-width: 300px;border:2px solid #008aff"
          >
          <input type="text" id="outIcon2" placeholder="引入外部 Icon URL "
          class="mb-4 "
          style="max-width: 300px;border:2px solid #008aff"
          >
          <button onclick="JumpMarker2()"
          class="btn btn-primary"
          style="max-width: 200px;"
          >建立靜態 Marker</button>
    </div>
    </div>
    <script>
    (g=>{var h,a,k,p="The Google Maps JavaScript API",c="google",l="importLibrary",q="__ib__",m=document,b=window;b=b[c]||(b[c]={});var d=b.maps||(b.maps={}),r=new Set,e=new URLSearchParams,u=()=>h||(h=new Promise(async(f,n)=>{await (a=m.createElement("script"));e.set("libraries",[...r]+"");for(k in g)e.set(k.replace(/[A-Z]/g,t=>"_"+t[0].toLowerCase()),g[k]);e.set("callback",c+".maps."+q);a.src=`https://maps.${c}apis.com/maps/api/js?`+e;d[q]=f;a.onerror=()=>h=n(Error(p+" could not load."));a.nonce=m.querySelector("script[nonce]")?.nonce||"";m.head.append(a)}));d[l]?console.warn(p+" only loads once. Ignoring:",g):d[l]=(f,...n)=>r.add(f)&&u().then(()=>d[l](f,...n))})
        ({key: "AIzaSyCpAqja_IdyYYjkHPCp7WonW1ToQBDNNuc", v: "beta"});
        let map
async function initMap() {
    const position = { lat: 23.5, lng: 121 };
    const { Map } = await google.maps.importLibrary("maps");
    const { Marker } = await google.maps.importLibrary("marker");
    map = new Map(document.getElementById('map'), {
        zoom: 8,
        center: position,
        mapId: '46b530e75dd3cc36',
    });
    const  marker = new Marker({
        map: map,
        position: position,
        animation: google.maps.Animation.BOUNCE,
        draggable: true,
    });
    const marker1 = new Marker({
        map: map,
        position: { lat: 22.5, lng: 121.3 },
        icon:'https://img.icons8.com/2266EE/search',
        animation: google.maps.Animation.BOUNCE,
        label: '搜尋',
        draggable: true
    });
    const marker2 = new Marker({
        map: map,
        position: { lat: 22.6, lng: 119.5 },
        icon:'https://www.oxxostudio.tw/img/articles/201801/google-maps-3-marker-icon.png',
        animation: google.maps.Animation.BOUNCE,
        label: '跳跳皮卡丘',
        draggable: true
    });

}
initMap();
async function JumpMarker(){
  const { Marker } = await google.maps.importLibrary("marker");
  const jumpLat=document.getElementById("jumplat").value;
  const jumpLng=document.getElementById("jumplon").value;
  const jumpText=document.getElementById("jumpValue").value;
  const outIcon=document.getElementById("outIcon").value;
  console.log({jumpLat,jumpLng,jumpText,outIcon})
  const jumpMarker=new Marker({
         map: map,
         position: { lat: parseInt(jumpLat), lng:parseInt(jumpLng)},
         animation: google.maps.Animation.BOUNCE,
         label: jumpText,
         draggable: true,
         icon:outIcon
     })
}
async function JumpMarker2(){
  const { Marker } = await google.maps.importLibrary("marker");
  const jumpLat2=document.getElementById("jumplat2").value;
  const jumpLng2=document.getElementById("jumplon2").value;
  const jumpText2=document.getElementById("jumpValue2").value;
  const outIcon2=document.getElementById("outIcon2").value;
  console.log({jumpLat2,jumpLng2,jumpText2,outIcon2})
  const jumpMarker=new Marker({
         map: map,
         position: { lat: parseInt(jumpLat2), lng:parseInt(jumpLng2)},
         animation: google.maps.Animation.BOUNCE,
         label: jumpText2,
         draggable: true,
         icon:outIcon2
     })
}
    </script> 

  </body>
</html>